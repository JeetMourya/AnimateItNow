name: Deploy with GitHub Token

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Generate config.js with GitHub token
        run: |
          echo "// Auto-generated by GitHub Actions during deployment" > config.js
          echo "// Token injected from repository secrets - DO NOT COMMIT THIS FILE" >> config.js
          echo "window.GITHUB_TOKEN = '${{ secrets.GH_PAT }}';" >> config.js
      
      - name: Deploy to GitHub Pages (or your deployment platform)
        # Add your deployment steps here
        # For GitHub Pages, you would use actions/upload-pages or similar
        # The config.js file will be included in the deployment but NOT committed to the repo
        run: |
          echo "config.js generated successfully"
          echo "Add your deployment steps here (e.g., deploy to Netlify, Vercel, GitHub Pages)"
          echo "The config.js file is ready for deployment"

